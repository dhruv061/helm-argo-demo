# ============================================================================
# Gateway API Configuration
# ============================================================================
gateway:
  name: nginx-gateway
  namespace: nginx-gateway
  className: nginx
  issuer: letsencrypt-prod

routesNamespace: default

# PRIMARY application domain (HTTPRoute only)
# Contain HTTPRoute Vaulr for only domains --> app.arthajobboard.com, api.arthajobboard.com, *.arthajobboard.com
primaryDomain:
  enabled: true
  # domain: arthajobboard.com
  domain: jobsinrajkot.com
  # Custom TLS certificate (not from cert-manager)
  tls:
    secretName: ssl-jobsinrajkot
    secretNamespace: default  # Where your secret is stored

  frontend:
    service: frontend-service
    port: 5010

  admin:
    service: admin-service
    port: 5011

  api:
    service: backend-service
    port: 5012

# Client Domains
domains:
  - domain: dhruv.jobsinrajkot.com
    dnsReady: true
    certificateScope: both      #vaules: both | www | non-www -> For more detail use Redme.md
    canonicalHost: www             #vaules: www | apex -> For more detail use Redme.md
    frontend:
      service: frontend-service
      port: 5010
    admin:
      service: admin-service
      port: 5011

  # - domain: aks-test.arthajobboard.com
  #   dnsReady: true
  #   certificateScope: non-www      #vaules: both | www | non-www -> For more detail use Redme.md
  #   canonicalHost: apex             #vaules: www | apex -> For more detail use Redme.md
  #   frontend:
  #     service: frontend-service
  #     port: 5010
  #   admin:
  #     service: admin-service
  #     port: 5011

# ============================================================================
# Application Components Configuration
# ============================================================================
applications:
  # Image registry configuration
  imageRegistry: arthajobboard.azurecr.io
  imagePullPolicy: IfNotPresent
  
  # Namespace for application resources
  namespace: default
  
  # Admin Panel
  admin:
    enabled: true
    replicaCount: 2
    image:
      repository: arthaadmin
      tag: migrated-v5.0.1
    containerPort: 5011
    resources:
      limits:
        cpu: 700m
        memory: 512Mi
      requests:
        cpu: 500m
        memory: 356Mi
    readinessProbe:
      enabled: true
      tcpSocket:
        port: 5011
      initialDelaySeconds: 5
      timeoutSeconds: 3
      periodSeconds: 10
    hpa:
      enabled: true
      minReplicas: 2
      maxReplicas: 10
      targetCPUUtilizationPercentage: 70
    service:
      name: admin-service
      port: 80
      targetPort: 5011
  
  # Backend API
  backend:
    enabled: true
    replicaCount: 3
    image:
      repository: arthanode
      tag: migrated-v5.0.2
    containerPort: 5012
    resources:
      limits:
        cpu: 1700m
        memory: 4Gi
      requests:
        cpu: 1200m
        memory: 3584Mi
    readinessProbe:
      enabled: true
      tcpSocket:
        port: 5012
      initialDelaySeconds: 20
      timeoutSeconds: 3
      periodSeconds: 5
    hpa:
      enabled: true
      minReplicas: 3
      maxReplicas: 4
      metrics:
        - type: Resource
          resource:
            name: cpu
            targetAverageUtilization: 75
        - type: Resource
          resource:
            name: memory
            targetAverageUtilization: 90
      behavior:
        scaleUp:
          stabilizationWindowSeconds: 0
        scaleDown:
          stabilizationWindowSeconds: 60
    pdb:
      enabled: true
      minAvailable: 1
    service:
      name: backend-service
      port: 80
      targetPort: 5012
  
  # Frontend Web
  frontend:
    enabled: true
    replicaCount: 3
    image:
      repository: arthaweb
      tag: migrated-v5.0.1
    containerPort: 5010
    resources:
      limits:
        cpu: 700m
        memory: 4Gi
      requests:
        cpu: 500m
        memory: 3584Mi
    readinessProbe:
      enabled: true
      tcpSocket:
        port: 5010
      initialDelaySeconds: 40
      timeoutSeconds: 3
      periodSeconds: 5
    hpa:
      enabled: true
      minReplicas: 3
      maxReplicas: 4
      metrics:
        - type: Resource
          resource:
            name: cpu
            targetAverageUtilization: 75
        - type: Resource
          resource:
            name: memory
            targetAverageUtilization: 90
      behavior:
        scaleUp:
          stabilizationWindowSeconds: 0
        scaleDown:
          stabilizationWindowSeconds: 60
    pdb:
      enabled: true
      minAvailable: 1
    service:
      name: frontend-service
      port: 80
      targetPort: 5010
  
  # Cron Service
  cronService:
    enabled: true
    replicaCount: 1
    image:
      repository: arthanode
      tag: migrated-v5.0.2
    command:
      - node
      - /app/api/components/cron-service/index.js
  
  # Email Alert Job
  emailAlertJob:
    enabled: true
    replicaCount: 1
    image:
      repository: arthanode
      tag: migrated-v5.0.2
    command:
      - node
      - /app/api/modules/notification/src/index.js
  
  # SSL Secrets (reference existing secrets, don't create new ones)
  ssl:
    # Reference to existing secret created by cert-manager
    secretName: ssl-artha-k8s-2026
    # If you want to manage the secret via Helm (not recommended for production)
    createSecret: false